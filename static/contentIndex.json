{"index":{"title":"index","links":["docs/workset","docs/topic"],"tags":[],"content":"kano-agent-backlog-skill\n\r\n\r\n\r\n\n\nAI Agent Skills for Spec-Driven Agentic Programming | Local-first backlog | Multi-agent collaboration | Durable decision trail\n\nLocal-first backlog + decision trail for agent collaboration.\nTurn chat-only context (trade-offs, decisions, why-not-that-option) into durable engineering assets, so your agent writes code only after capturing what to do, why, and how to verify.\n\nCode can be rewritten. Lost decisions can’t.\n\nAgent-first quickstart\nThis repo is meant to be used with an AI agent. The goal is not just to generate code, but to keep an auditable trail of intent, constraints, and decisions.\nCopy/paste: agent instructions\nPaste this into your agent’s system prompt / project instructions, ex: AGENTS.md:\nYou are an engineering agent working in this repository.\n \nRules of engagement:\n- Read and follow SKILL.md.\n- Before changing any code, ensure there is a Task/Bug item for the change and that it is Ready (Context, Goal, Approach, Acceptance Criteria, Risks / Dependencies are non-empty).\n- Use kano-backlog commands to create/update items and append Worklog entries; Worklog is append-only.\n- Use a workset while implementing: init -&gt; next -&gt; edit plan.md (check off completed steps) -&gt; next -&gt; repeat.\n- If a decision is load-bearing, create an ADR and link it from the item.\n- Prefer deterministic, repo-grounded outputs; do not invent file paths or backlog state.\nThe execution loop (minimal)\n# One-time setup in a repo\nkano-backlog backlog init --product &lt;my-product&gt; --agent &lt;agent-id&gt;\n \n# Start work (tickets-first)\nkano-backlog item create --type task --title &quot;...&quot; --agent &lt;agent-id&gt; --product &lt;my-product&gt;\nkano-backlog item set-ready &lt;ITEM_ID&gt; --product &lt;my-product&gt; \\\n  --context &quot;...&quot; --goal &quot;...&quot; --approach &quot;...&quot; --acceptance-criteria &quot;...&quot; --risks &quot;...&quot;\nkano-backlog item update-state &lt;ITEM_ID&gt; --state InProgress --agent &lt;agent-id&gt; --product &lt;my-product&gt;\n \n# Prevent drift while implementing\nkano-backlog workset init --item &lt;ITEM_ID&gt; --agent &lt;agent-id&gt;\nkano-backlog workset next --item &lt;ITEM_ID&gt;\n \n# (Edit _kano/backlog/.cache/worksets/items/&lt;ITEM_ID&gt;/plan.md to check off steps)\n# Then run `kano-backlog workset next --item &lt;ITEM_ID&gt;` again.\n \n# Write back anything worth keeping\nkano-backlog workset promote --item &lt;ITEM_ID&gt; --agent &lt;agent-id&gt;\nkano-backlog view refresh --product &lt;my-product&gt; --agent &lt;agent-id&gt;\nTip: most commands support --format json for structured agent/tool integration.\nWhat this is\nkano-agent-backlog-skill is an Agent Skill bundle (centered around SKILL.md) that guides/constrains an agent into a “tickets first” workflow:\n\nCreate/update a work item (Epic/Feature/UserStory/Task/Bug) before any code change\nCapture key decisions via append-only Worklog entries or ADRs, and link them together\nEnforce a Ready gate so each item has the minimum shippable context (Context/Goal/Approach/Acceptance/Risks)\nOptional Obsidian views (Dataview / Bases) so humans can inspect, intervene, and review\n\nThis skill is local-first: you can start without Jira / Azure Boards and still keep engineering discipline.\nWhy you might want it\nIf any of these sound familiar, this helps:\n\nYou made an architecture choice, but later forgot why you didn’t pick the other option\nThe agent output works, but maintenance feels like archaeology (missing rationale and constraints)\nRequirement changes force you back into chat history to understand impact\nYou want the agent as a teammate, but you end up acting as the “human memory cache”\n\nGoal: convert “evaporating context” into searchable, linkable, auditable files in your repo.\nThe Dual-Readability Principle\nTopics and Snapshots are designed to solve two problems at once:\n\nHuman Overload: Humans cannot keep entire repo states in their head. We need high-level summaries (brief.md, Reports) to make decisions.\nAgent Coordination: Agents cannot “see” the repo like we do. They need explicit lists of files, line numbers, and “stub inventories” to know what to do next.\n\nBy enforcing Dual-Readability (Markdown for humans, JSON/Structured data for Agents), we create a shared workspace where:\n\nHumans provide direction (via Briefs).\nAgents provide evidence (via Snapshots).\nBoth can understand the other’s output without translation.\n\nWhat you get (implemented)\n\nSKILL.md: the workflow and rules (planning-before-coding, Ready gate, worklog discipline)\nreferences/schema.md: item types, states, naming, minimal frontmatter\nreferences/templates.md: work item / ADR templates\nreferences/workflow.md: SOP (when to create items, when to record decisions, how to converge)\nreferences/views.md: Obsidian view patterns (Dataview + Bases)\nkano-backlog: Typer-based CLI entrypoint with subcommands:\n\nitem - Create and manage work items (Epic/Feature/UserStory/Task/Bug)\nitem update-state - Transition item states with worklog tracking\nworklog - Append worklog entries\nadr - Create and manage Architecture Decision Records\nworkset - Per-item execution cache (init/refresh/next/promote/cleanup/detect-adr)\ntopic - Context grouping and switching (create/add/pin/distill/decision-audit/switch/export-context/list)\nworkitem - Item utilities (including add-decision write-back)\nview - Generate dashboards and reports\nbacklog - Initialize and manage backlog structure\ndoctor - Validate backlog health\n\n\nsrc/kano_backlog_core: canonical models/storage helpers\nsrc/kano_backlog_ops: use-cases (create/update/view/workset/topic)\nsrc/kano_backlog_cli: CLI wiring (commands + utilities)\n\nNote: backlog administration commands are grouped under kano-backlog backlog ....\nOptionally, create _kano/backlog/ in your project repo to store items, ADRs, views, and helper scripts as the system of record.\nInstall and run\nFrom this repository root:\npython -m pip install -e .\nkano-backlog --help\nNo-install option (useful for agents/tools that run scripts directly):\npython scripts/kano-backlog --help\nQuick start (see value in ~5 minutes)\n\nRun kano-backlog backlog init --product &lt;my-product&gt; --agent &lt;id&gt; to scaffold _kano/backlog/products/&lt;my-product&gt;/\n(Optional) Open the repo in Obsidian and enable Dataview or Bases\nOpen _kano/backlog/products/&lt;my-product&gt;/views/ (or regenerate them with kano-backlog view refresh --agent &lt;id&gt; --product &lt;my-product&gt;)\nBefore any code change, create a Task/Bug and satisfy the Ready gate\nWhen a load-bearing decision happens, append a Worklog line; create an ADR when it’s truly architectural and link it\n\nWorkset and Topic Usage\nWorksets: Focused Execution\nWorksets prevent agent drift during task execution by providing a structured working context:\n# Initialize workset for a task\nkano-backlog workset init --item TASK-0042 --agent kiro\n \n# Get next action from plan\nkano-backlog workset next --item TASK-0042\n \n# Detect decisions that should become ADRs\nkano-backlog workset detect-adr --item TASK-0042\n \n# Promote deliverables to canonical artifacts\nkano-backlog workset promote --item TASK-0042 --agent kiro\n \n# Clean up expired worksets\nkano-backlog workset cleanup --ttl-hours 72\nSee workset.md for complete documentation.\nTopics: Context Switching\nTopics enable rapid context switching when focus areas change.\nUnlike worksets (which live entirely under _kano/backlog/.cache/worksets/items/&lt;item-id&gt;/), topics are stored under _kano/backlog/topics/&lt;topic&gt;/ so the deterministic brief.md can be shared/reviewed. Raw materials under materials/ are treated as cache.\n# Create a topic for related work\nkano-backlog topic create auth-refactor --agent kiro\n \n# Add items to the topic\nkano-backlog topic add auth-refactor --item TASK-0042\nkano-backlog topic add auth-refactor --item BUG-0012\n \n# Pin relevant documents\nkano-backlog topic pin auth-refactor --doc _kano/backlog/decisions/ADR-0015.md\n \n# Collect a code snippet reference (optional cached snapshot)\nkano-backlog topic add-snippet auth-refactor --file src/auth.py --start 10 --end 25 --agent kiro --snapshot\n \n# Distill deterministic brief.generated.md from collected materials\nkano-backlog topic distill auth-refactor\n \n# Generate a decision write-back audit report (writes to topic publish/)\nkano-backlog topic decision-audit auth-refactor --format plain\n \n# Switch active topic (per-agent pointer lives in cache)\nkano-backlog topic switch auth-refactor --agent kiro\n \n# Export context bundle\nkano-backlog topic export-context auth-refactor --format json\n \n# Close and later cleanup closed topics\nkano-backlog topic close auth-refactor --agent kiro\nkano-backlog topic cleanup --ttl-days 14\nkano-backlog topic cleanup --ttl-days 14 --apply\n \n# Write back a decision to a work item (appends to the item&#039;s Decisions section + Worklog)\nkano-backlog workitem add-decision KABSD-TSK-0001 \\\n  --decision &quot;Use X over Y because ...&quot; \\\n  --source &quot;_kano/backlog/topics/auth-refactor/synthesis/decision-notes.md&quot; \\\n  --agent kiro \\\n  --product &lt;my-product&gt;\nSee topic.md for complete documentation.\nSkill version\nShow the current skill version:\npython -c &quot;import pathlib; print((pathlib.Path(&#039;VERSION&#039;)).read_text().strip())&quot;\nExternal references\n\nAgent skills overview (Anthropic/Claude): platform.claude.com/docs/en/agents-and-tools/agent-skills/overview\nVersioning policy: VERSIONING.md\nRelease notes: CHANGELOG.md\n\nContributing\nPRs welcome, with one rule: don’t turn this into another Jira.\nThe point is to preserve decisions and acceptance, not to worship process.\nLicense\nMIT"},"skill-guide":{"title":"skill-guide","links":[],"tags":[],"content":"Kano Agent Backlog Skill (local-first)\nScope\nUse this skill to:\n\nPlan new work by creating backlog items before code changes.\nMaintain hierarchy and relationships via parent links, as defined by the active process profile.\nRecord decisions with ADRs and link them to items.\nKeep a durable, append-only worklog for project evolution.\n\nAgent compatibility: read the whole skill\n\nAlways load the entire SKILL.md before acting; some agent shells only fetch the first ~100 lines by default.\nIf your client truncates, fetch in chunks (e.g., lines 1-200, 200-400, …) until you see the footer marker END_OF_SKILL_SENTINEL.\nIf you cannot confirm the footer marker, stop and ask for help; do not proceed with partial rules.\nWhen generating per-agent guides, preserve this read-all requirement so downstream agents stay in sync.\n\nNon-negotiables\n\nPlanning before coding: create/update items and meet the Ready gate before making code changes.\nWorklog is append-only; never rewrite history.\nUpdate Worklog whenever:\n\na discussion produces a clear decision or direction,\nan item state changes,\nscope/approach changes,\nor an ADR is created/linked.\n\n\nArchive by view: hide Done/Dropped items in views by default; do not move files unless explicitly requested.\nBacklog volume control:\n\nOnly create items for work that changes code or design decisions.\nAvoid new items for exploratory discussion; record in existing Worklog instead.\nKeep Tasks/Bugs sized for a single focused session.\nAvoid ADRs unless a real architectural trade-off is made.\n\n\nTicketing threshold (agent-decided):\n\nOpen a new Task/Bug when you will change code/docs/views/scripts.\nOpen an ADR (and link it) when a real trade-off or direction change is decided.\nOtherwise, record the discussion in an existing Worklog; ask if unsure.\n\n\nTicket type selection (keep it lightweight):\n\nEpic: multi-release or multi-team milestone spanning multiple Features.\nFeature: a new capability that delivers multiple UserStories.\nUserStory: a single user-facing outcome that requires multiple Tasks.\nTask: a single focused implementation or doc change (typically one session).\nExample: “End-to-end embedding pipeline” = Epic; “Pluggable vector backend” = Feature; “MVP chunking pipeline” = UserStory; “Implement tokenizer adapter” = Task.\n\n\nBug vs Task triage (when fixing behavior):\n\nIf you are correcting a behavior that was previously marked Done and the behavior violates the original intent/acceptance (defect or regression), open a Bug and link it to the original item.\nIf the change is a new requirement/scope change beyond the original acceptance, open a Task/UserStory (or Feature) instead, and link it for traceability.\n\n\nBug origin tracing (when diagnosing a defect/regression):\n\nRecord when the issue started and the evidence path you used to determine it.\nPrefer VCS-backed evidence when available:\n\nlast-known-good revision (commit hash or tag)\nfirst-known-bad revision (commit hash or tag)\nsuspected introducing change(s) (commit hash) and why (e.g., git blame on specific lines)\n\n\nIf git history is unavailable (zip export, shallow clone, missing remote), explicitly record that limitation and what alternative evidence you used (e.g., release notes, timestamps, reproduction reports).\nKeep evidence lightweight: record commit hashes + 1–2 line summaries; avoid pasting large diffs into Worklog. Attach artifacts when needed.\nSuggested Worklog template:\n\nBug origin: last_good=&lt;sha|tag&gt;, first_bad=&lt;sha|tag&gt;, suspect=&lt;sha&gt; (reason: blame &lt;path&gt;:&lt;line&gt;), evidence=&lt;git log/blame/bisect|other&gt;\n\n\n\n\nState ownership: the agent decides when to move items to InProgress or Done; humans observe and can add context.\nState semantics: Proposed = needs discovery/confirmation; Planned = approved but not started; Ready gate applies before start.\nHierarchy is in frontmatter links, not folder nesting; avoid moving files to reflect scope changes.\nFilenames stay stable; use ASCII slugs.\nNever include secrets in backlog files or logs.\nLanguage: backlog and documentation content must be English-only (no CJK), to keep parsing and cross-agent collaboration deterministic.\nAgent Identity: In Worklog and audit logs, use your own identity (e.g., [agent=antigravity]), never copy [agent=codex] blindly.\nAlways provide an explicit --agent value for auditability (some commands currently default to cli, but do not rely on it).\nModel attribution (optional but preferred): provide --model &lt;name&gt; (or env KANO_AGENT_MODEL / KANO_MODEL) when it is known deterministically.\n\nDo not guess model names; if unknown, omit the [model=...] segment.\n\n\nAgent Identity Protocol: Supply --agent &lt;ID&gt; with your real product name (e.g., cursor, copilot, windsurf, antigravity).\n\nForbidden (Placeholders): auto, user, assistant, &lt;AGENT_NAME&gt;, $AGENT_NAME.\n\n\nFile operations for backlog/skill artifacts must go through the kano-backlog CLI\r\n(python skills/kano-agent-backlog-skill/scripts/kano-backlog &lt;command&gt;) so audit logs capture the action.\nSkill scripts only operate on paths under _kano/backlog/ or _kano/backlog_sandbox/;\r\nrefuse other paths.\nAfter modifying backlog items, refresh the plain Markdown views immediately using\r\npython skills/kano-agent-backlog-skill/scripts/kano-backlog view refresh --agent &lt;agent-id&gt; --backlog-root &lt;path&gt; so the dashboards stay current.\n\nPersona summaries/reports are available via python skills/kano-agent-backlog-skill/scripts/kano-backlog admin persona summary|report ....\n\n\npython skills/kano-agent-backlog-skill/scripts/kano-backlog workitem update-state ... auto-syncs parent states forward-only by default; use --no-sync-parent\r\nfor manual re-plans where parent state should stay put.\nAdd Obsidian [[wikilink]] references in the body (e.g., a ## Links section) so Graph/backlinks work; frontmatter alone does not create graph edges.\n\nAgent compatibility: read the whole skill\n\nAlways load the entire SKILL.md before acting; some agent shells only fetch the first ~100 lines by default.\nIf your client truncates, fetch in chunks (e.g., lines 1-200, 200-400, …) until you see the footer marker END_OF_SKILL_SENTINEL.\nIf you cannot confirm the footer marker, stop and ask for help; do not proceed with partial rules.\nWhen generating per-agent guides, preserve this read-all requirement so downstream agents stay in sync.\n\nFirst-run bootstrap (prereqs + initialization)\nBefore using this skill in a repo, the agent must confirm:\n\nPython prerequisites are available (or install them), and\nthe backlog scaffold exists for the target product/root.\n\nIf the backlog structure is missing, propose the bootstrap commands and wait for user approval before writing files.\nDeveloper vs user mode (where to declare it)\n\nPreferred source of truth: product config in _kano/backlog/products/&lt;product&gt;/_config/config.json.\n\nmode.skill_developer: true when this repo actively develops the skill itself (this demo repo).\nmode.persona: optional string describing the primary human persona (e.g. developer, pm, qa), used only for human-facing summaries/views.\n\n\nSecondary: agent guide files (e.g., AGENTS.md / CLAUDE.md) can document expectations, but are agent-specific and not script-readable.\n\nSkill developer gate (architecture compliance)\nIf mode.skill_developer=true, before writing any skill code (in scripts/ or src/), you must:\n\nRead ADR-0013 (“Codebase Architecture and Module Boundaries”) in the product decisions folder.\nFollow the folder rules defined in ADR-0013:\n\nscripts/ is executable-only: no reusable module code.\nsrc/ is import-only: core logic lives here, never executed directly.\nAll agent-callable operations go through scripts/kano-backlog CLI.\n\n\nPlace new code in the correct package:\n\nModels/config/errors → src/kano_backlog_core/\nUse-cases (create/update/view) → src/kano_backlog_ops/\nStorage backends → src/kano_backlog_adapters/\nCLI commands → src/kano_backlog_cli/commands/\n\n\n\nViolating these boundaries will be flagged in code review.\nPrerequisite install (Python)\nDetect:\n\nRun python skills/kano-agent-backlog-skill/scripts/kano-backlog doctor --format plain.\n\nIf packages are missing, install once (recommended):\n\nDefault: python -m pip install -e skills/kano-agent-backlog-skill\nSkill contributors: python -m pip install -e skills/kano-agent-backlog-skill[dev]\nOptional heavy dependencies (FAISS, sentence-transformers) should be installed manually per platform requirements before running the CLI against embedding features.\n\nBacklog initialization (file scaffold + config + dashboards)\nDetect (multi-product / platform layout):\n\nProduct initialized if _kano/backlog/products/&lt;product&gt;/_config/config.json exists (or confirm via python skills/kano-agent-backlog-skill/scripts/kano-backlog doctor --product &lt;product&gt;).\n\nBootstrap:\n\nRun python skills/kano-agent-backlog-skill/scripts/kano-backlog admin init --product &lt;product&gt; --agent &lt;agent-id&gt; [--backlog-root &lt;path&gt;] to scaffold _kano/backlog/products/&lt;product&gt;/ (items/, decisions/, views/, _config/, _meta/, _index/).\nThe init command derives a project prefix, writes _config/config.json, and refreshes dashboards so views exist immediately after initialization.\nManual fallback (only if automation is unavailable): follow _kano/backlog/README.md to copy the template scaffold, then refresh views via kano-backlog view refresh.\n\nOptional LLM analysis over deterministic reports\nThis skill can optionally append an LLM-generated analysis to a deterministic report.\r\nThe deterministic report is the SSOT; analysis is treated as a derived artifact.\n\nDeterministic report: views/Report_&lt;persona&gt;.md\nDerived LLM output: views/_analysis/Report_&lt;persona&gt;_LLM.md (gitignored by default)\nDeterministic prompt artifact: views/_analysis/Report_&lt;persona&gt;_analysis_prompt.md\n\nEnable by config (per product):\n\nanalysis.llm.enabled = true\n\nExecution:\n\nThe default workflow is: generate the deterministic report → use it as SSOT → fill in the analysis template.\n\nThe skill generates a deterministic prompt file to guide the analysis, and a derived markdown file with placeholder headings.\n\n\nOptional automation: when analysis.llm.enabled = true in config, view refresh generates views/snapshots/_analysis/Report_&lt;persona&gt;_analysis_prompt.md (deterministic prompt) and Report_&lt;persona&gt;_LLM.md (template or LLM output)\nNever pass API keys as CLI args; keep secrets in env vars to avoid leaking into audit logs.\n\nID prefix derivation\n\nSource of truth:\n\nProduct config: _kano/backlog/products/&lt;product&gt;/_config/config.toml (product.name, product.prefix), or\nRepo config (single-product): _kano/backlog/_config/config.toml (product.name, product.prefix).\n\n\nDerivation:\n\nSplit product.name on non-alphanumeric separators and camel-case boundaries.\nTake the first letter of each segment.\nIf only one letter, take the first letter plus the next consonant (A/E/I/O/U skipped).\nIf still short, use the first two letters.\nUppercase the result.\n\n\nExample: product.name=kano-agent-backlog-skill-demo → KABSD.\n\nRecommended layout\nThis skill supports both single-product and multi-product layouts:\n\nSingle-product (repo-level): _kano/backlog/\nMulti-product (monorepo): _kano/backlog/products/&lt;product&gt;/\n\nWithin each backlog root:\n\n_meta/ (schema, conventions)\nitems/&lt;type&gt;/&lt;bucket&gt;/ (work items)\ndecisions/ (ADR files)\nviews/ (dashboards / generated Markdown)\n\nItem bucket folders (per 100)\n\nStore items under _kano/backlog/items/&lt;type&gt;/&lt;bucket&gt;/.\nBucket names use 4 digits for the lower bound of each 100 range.\n\nExample: 0000, 0100, 0200, 0300, …\n\n\nExample path:\n\n_kano/backlog/items/task/0000/KABSD-TSK-0007_define-secret-provider-validation.md\n\n\n\nIndex/MOC files\n\nFor Epic, create an adjacent index file:\n\n&lt;ID&gt;_&lt;slug&gt;.index.md\n\n\nIndex files should render a tree using Dataview/DataviewJS and rely on parent links.\nTrack epic index files in _kano/backlog/_meta/indexes.md (type, item_id, index_file, updated, notes).\n\nReferences\n\nReference index: REFERENCE.md\nSchema and rules: references/schema.md\nTemplates: references/templates.md\nWorkflow SOP: references/workflow.md\nView patterns: references/views.md\nObsidian Bases (plugin-free): references/bases.md\nContext Graph + Graph-assisted retrieval: references/context_graph.md\n\nIf the backlog structure is missing, propose creation and wait for user approval before writing files.\nKano CLI entrypoints (current surface)\nscripts/ exposes a single executable: scripts/kano-backlog. The CLI is intentionally organized as nested command groups so agents can discover operations via --help on-demand (instead of hard-coding the full command surface into this skill).\nHelp-driven discovery (preferred)\nRun these in order, expanding only what you need:\n\npython skills/kano-agent-backlog-skill/scripts/kano-backlog --help\n\nShows top-level groups (e.g., backlog, item, state, worklog, view) and global options.\n\n\npython skills/kano-agent-backlog-skill/scripts/kano-backlog &lt;group&gt; --help\n\nShows subcommands for that group.\n\n\npython skills/kano-agent-backlog-skill/scripts/kano-backlog &lt;group&gt; &lt;command&gt; --help\n\nShows required args/options for that command.\n\n\n\nGuideline: do not paste large --help output into chat; inspect it locally and run the command.\nCanonical examples (keep these few memorized)\n\nBootstrap:\n\npython skills/kano-agent-backlog-skill/scripts/kano-backlog doctor --format plain\npython skills/kano-agent-backlog-skill/scripts/kano-backlog admin init --product &lt;name&gt; --agent &lt;id&gt;\n\n\nDaily workflow:\n\npython skills/kano-agent-backlog-skill/scripts/kano-backlog workitem create --type task --title &quot;...&quot; --agent &lt;id&gt; --product &lt;name&gt;\npython skills/kano-agent-backlog-skill/scripts/kano-backlog workitem set-ready &lt;item-id&gt; --context &quot;...&quot; --goal &quot;...&quot; --approach &quot;...&quot; --acceptance-criteria &quot;...&quot; --risks &quot;...&quot; --product &lt;name&gt;\npython skills/kano-agent-backlog-skill/scripts/kano-backlog workitem validate &lt;item-id&gt; --product &lt;name&gt;\npython skills/kano-agent-backlog-skill/scripts/kano-backlog workitem update-state &lt;item-ref&gt; --state InProgress --agent &lt;id&gt; --message &quot;...&quot; --product &lt;name&gt;\npython skills/kano-agent-backlog-skill/scripts/kano-backlog workitem attach-artifact &lt;item-id&gt; --path &lt;file&gt; --shared --agent &lt;id&gt; --product &lt;name&gt; [--note &quot;...&quot;]\npython skills/kano-agent-backlog-skill/scripts/kano-backlog view refresh --agent &lt;id&gt; --product &lt;name&gt;\n\n\nBacklog integrity checks:\n\npython skills/kano-agent-backlog-skill/scripts/kano-backlog admin validate uids --product &lt;name&gt;\n\n\n\nConflict handling policy (configurable)\nUse product config to control how duplicate IDs and UIDs are handled by maintenance commands\r\nsuch as admin links normalize-ids.\n\nConfig keys (product _config/config.toml):\n\nconflict_policy.id_conflict: default rename (rename duplicate IDs).\nconflict_policy.uid_conflict: default trash_shorter (move shorter duplicate content to _trash/).\n\n\ntrash_shorter uses _trash/&lt;YYYYMMDD&gt;/... under the product root; items get a Worklog entry.\n\nSandbox workflow (isolated experimentation)\nFor testing, prototyping, or demos without affecting production backlog:\n\nCreate: python skills/kano-agent-backlog-skill/scripts/kano-backlog admin sandbox init &lt;sandbox-name&gt; --product &lt;source-product&gt; --agent &lt;id&gt;\nUse: python skills/kano-agent-backlog-skill/scripts/kano-backlog workitem create --product &lt;sandbox-name&gt; ... (same CLI, different product)\nCleanup: rm -rf _kano/backlog_sandbox/&lt;sandbox-name&gt; (git will ignore this directory)\nRationale: Sandboxes mirror production structure but live in _kano/backlog_sandbox/, so changes never leak into _kano/backlog/.\n\nArtifacts policy (local-first)\n\nStorage locations:\n\nShared across products: _kano/backlog/_shared/artifacts/&lt;ITEM_ID&gt;/ (use --shared).\nProduct-local: _kano/backlog/products/&lt;product&gt;/artifacts/&lt;ITEM_ID&gt;/ (use --no-shared).\n\n\nUsage:\n\nAttach via workitem attach-artifact — copies the file and appends a Worklog link.\nPrefer lightweight, text-first artifacts (Markdown, Mermaid, small images). Use Git LFS for large binaries if needed.\n\n\nGit policy:\n\nCommit human-readable artifacts that aid review. Avoid committing generated binaries unless justified.\nSandboxes under _kano/backlog_sandbox/ are gitignored; artifacts there are ephemeral.\nFor derived analysis, store under views/_analysis/ (gitignored by default), and keep deterministic reports in views/.\n\n\nLinking:\n\nThe CLI appends a Markdown link relative to the item file. Optionally add a ## Links section for richer context.\n\n\n\nState update helper\n\nUse python skills/kano-agent-backlog-skill/scripts/kano-backlog workitem update-state ... to update state + append Worklog.\nPrefer --action on kano-backlog state transition for the common transitions (start, ready, review, done, block, drop).\nUse python skills/kano-agent-backlog-skill/scripts/kano-backlog workitem validate &lt;item-id&gt; to check the Ready gate explicitly.\n\nTopic and Workset workflow (context management)\nWhen to use Topics\nTopics are shareable context buffers for multi-step work that spans multiple work items or requires exploratory research before creating formal backlog items.\nUse Topics when:\n\nExploring a complex problem that may result in multiple work items\nCollecting code snippets, logs, and materials across multiple sessions\nCollaborating across agents/sessions with a shared context\nRefactoring work that requires tracking multiple code locations\n\nTopic lifecycle:\n\nCreate: python skills/kano-agent-backlog-skill/scripts/kano-backlog topic create &lt;topic-name&gt; --agent &lt;id&gt;\n\nCreates _kano/backlog/topics/&lt;topic&gt;/ with manifest.json, brief.md, brief.generated.md, notes.md, and materials/ subdirectories\n\n\nCollect materials:\n\nAdd items: topic add &lt;topic-name&gt; --item &lt;ITEM_ID&gt;\nAdd code snippets: topic add-snippet &lt;topic-name&gt; --file &lt;path&gt; --start &lt;line&gt; --end &lt;line&gt; --agent &lt;id&gt;\nPin docs: topic pin &lt;topic-name&gt; --doc &lt;path&gt;\n\n\nDistill: python skills/kano-agent-backlog-skill/scripts/kano-backlog topic distill &lt;topic-name&gt;\n\n\nGenerates/overwrites deterministic brief.generated.md from collected materials\nbrief.md is a stable, human-maintained brief (do not overwrite it automatically)\n\n\nSwitch context: python skills/kano-agent-backlog-skill/scripts/kano-backlog topic switch &lt;topic-name&gt; --agent &lt;id&gt;\n\nSets active topic (affects config overlays and workset behavior)\n\n\nClose: python skills/kano-agent-backlog-skill/scripts/kano-backlog topic close &lt;topic-name&gt; --agent &lt;id&gt;\n\nMarks topic as closed; eligible for TTL cleanup\n\n\nCleanup: python skills/kano-agent-backlog-skill/scripts/kano-backlog topic cleanup --ttl-days &lt;N&gt; [--dry-run]\n\nRemoves raw materials from closed topics older than TTL\n\n\n\nTopic snapshots (retention policy):\n\nSnapshots are intended for milestone checkpoints (pre-merge/split/restore, risky bulk edits), not every small edit.\nTo prevent noise, keep only the latest snapshot per topic in this demo repo.\nAfter creating a snapshot (or periodically), prune all but the newest snapshot:\n\npython skills/kano-agent-backlog-skill/scripts/kano-backlog topic snapshot cleanup &lt;topic-name&gt; --ttl-days 0 --keep-latest 1 --apply\n\n\n\nTopic structure:\n_kano/backlog/topics/&lt;topic&gt;/\r\n  manifest.json          # refs to items/docs/snippets, status, timestamps\r\n  brief.md               # stable, human-maintained brief (do not overwrite automatically)\r\n  brief.generated.md     # deterministic distilled brief (generated/overwritten by `topic distill`)\r\n  notes.md               # freeform notes (backward compat)\r\n  materials/             # raw collection (gitignored by default)\r\n    clips/               # code snippet refs + cached text\r\n    links/               # urls / notes\r\n    extracts/            # extracted paragraphs\r\n    logs/                # build logs / command outputs\r\n  synthesis/             # intermediate drafts\r\n  publish/               # prepared write-backs (patches/ADRs)\r\n  config.toml            # optional topic-specific config overrides\n\nWhen to use Worksets\nWorksets are per-item working directories (cached, derived data) for a single backlog item.\nUse Worksets when:\n\nStarting work on a specific Task/Bug/UserStory\nNeed scratch space for deliverables (patches, test artifacts, etc.)\nWant item-specific config overrides (rare)\n\nWorkset lifecycle:\n\nInitialize: python skills/kano-agent-backlog-skill/scripts/kano-backlog workset init &lt;ITEM_ID&gt; --agent &lt;id&gt; [--ttl-hours &lt;N&gt;]\n\nCreates _kano/backlog/.cache/worksets/items/&lt;ITEM_ID&gt;/ with meta.json, plan.md, notes.md, deliverables/\n\n\nWork: Store scratch files in deliverables/ (patches, test outputs, etc.)\nRefresh: python skills/kano-agent-backlog-skill/scripts/kano-backlog workset refresh &lt;ITEM_ID&gt; --agent &lt;id&gt;\n\nUpdates refreshed_at timestamp\n\n\nCleanup: python skills/kano-agent-backlog-skill/scripts/kano-backlog workset cleanup --ttl-hours &lt;N&gt; [--dry-run]\n\nRemoves stale worksets older than TTL\n\n\n\nWorkset structure:\n_kano/backlog/.cache/worksets/items/&lt;ITEM_ID&gt;/\r\n  meta.json              # workset metadata (item_id, agent, timestamps, ttl)\r\n  plan.md                # execution plan template\r\n  notes.md               # work notes with Decision: marker guidance\r\n  deliverables/          # scratch outputs (patches, logs, test artifacts)\r\n  config.toml            # optional item-specific config overrides\n\nTopic vs Workset decision guide\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nScenarioUse TopicUse WorksetExploring before creating items✅ Yes❌ NoMulti-item refactor✅ Yes❌ NoCollecting code snippets across files✅ Yes❌ NoShared context for collaboration✅ Yes❌ NoSingle item scratch space❌ No✅ YesItem-specific deliverables❌ No✅ YesVersion-controlled distillation✅ Yes (brief.generated.md)❌ No\nBest practice: Start exploration in a Topic, create work items as scope clarifies, then use Worksets for individual item execution.\nActive topic and config overlays\n\nActive topic is per-agent: _kano/backlog/.cache/worksets/active_topic.&lt;agent&gt;.txt\nWhen an agent has an active topic, config resolution includes topic overrides:\n\nLayer order: defaults → product → topic → workset → runtime\nTopic config: _kano/backlog/topics/&lt;topic&gt;/config.toml\nUse for temporary overrides (e.g., switch default_product during exploration)\n\n\nGet active topic: python skills/kano-agent-backlog-skill/scripts/kano-backlog topic show --agent &lt;id&gt;\n\nMaterials buffer (Topic-specific)\n\nReference-first snippet collection: Avoid large copy-paste; store file+line+hash+optional snapshot\nSnippet refs include:\n\nfile: relative path from workspace root\nlines: [start, end] (1-based inclusive)\nhash: sha256:... of content for staleness check\ncached_text: optional snapshot (use --snapshot to include)\nrevision: git commit hash if available\n\n\n\nHuman decision materials vs. machine manifest\nDual-Readability Design: Every artifact checks against both human and agent readability:\n\nHuman-Readable: High-level summaries, clear checklists, “manager-friendly” reports for rapid decision-making\nAgent-Readable: Structural precision, file paths, line numbers, explicit markers for action without hallucination\n\nImplementation in Topics:\n\nTreat manifest.json as machine-oriented metadata:\n\nseed_items: UUID list for precise agent reference\nsnippet_refs: file+line+hash for deterministic loading\npinned_docs: absolute paths for unambiguous reference\n\n\nKeep brief.generated.md deterministic and tool-owned (generated/overwritten by topic distill):\n\nReadable item titles (e.g., “KABSD-TSK-0042: Implement tokenizer adapter”)\nIf available, include item path and keep UID in a hidden HTML comment for deterministic mapping\nMaterials index with items/docs/snippets sorted for repeatability\n\n\nKeep brief.md human-oriented and stable (do not overwrite automatically):\n\nContext summary and key decisions\nOptional: include a human-friendly materials list (do not duplicate raw snippet text)\n\n\nPut human-facing decision support in _kano/backlog/topics/&lt;topic&gt;/notes.md (and/or pinned docs), e.g.:\n\nDecision to make\nOptions + trade-offs\nEvidence (ADR links, snippet refs, benchmark/log artifacts)\nRecommendation + follow-ups\n\n\nStaleness detection: Compare current file hash with stored hash to detect if code changed\nDistillation: topic distill generates deterministic brief.generated.md with a repeatable materials index\n\n\nEND_OF_SKILL_SENTINEL"}}